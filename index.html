<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0a0f14">
    <title>Promo Catalog</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="style.css?v=6">
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
        <header class="main-header">
            <div class="header-top">
                <h1>–ö–∞—Ç–∞–ª–æ–≥ –°–∫–∏–¥–æ–∫</h1>
                <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∏ -->
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('catalog')" data-tab="catalog">
                    üìö –ö–∞—Ç–∞–ª–æ–≥
                </button>
                <button class="tab-btn" onclick="switchTab('favorites')" data-tab="favorites">
                    ‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
                </button>
            </div>
            
            <!-- –ü–æ–∏—Å–∫ -->
            <div class="search-container">
                <input type="search" id="searchInput" placeholder="üîç –ù–∞–π—Ç–∏ –±—Ä–µ–Ω–¥...">
                <button class="filter-btn" onclick="toggleFilters()">üîΩ</button>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã (—Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div id="filtersPanel" class="filters-panel hidden">
                <div class="filter-group">
                    <label>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                    <select id="categoryFilter">
                        <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>üí∞ –ú–∏–Ω. —Å–∫–∏–¥–∫–∞:</label>
                    <select id="discountFilter">
                        <option value="0">–õ—é–±–∞—è</option>
                        <option value="500">–æ—Ç 500 ‚ÇΩ</option>
                        <option value="1000">–æ—Ç 1000 ‚ÇΩ</option>
                        <option value="3000">–æ—Ç 3000 ‚ÇΩ</option>
                        <option value="5000">–æ—Ç 5000 ‚ÇΩ</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>üìä –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                    <select id="sortFilter">
                        <option value="popularity">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
                        <option value="alphabet">–ü–æ –∞–ª—Ñ–∞–≤–∏—Ç—É</option>
                        <option value="discount">–ü–æ —Ä–∞–∑–º–µ—Ä—É —Å–∫–∏–¥–∫–∏</option>
                        <option value="newest">–ü–æ –¥–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</option>
                    </select>
                </div>
                
                <button class="apply-filters-btn" onclick="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            </div>
            
            <!-- –ù–µ–¥–∞–≤–Ω–∏–µ –ø–æ–∏—Å–∫–∏ -->
            <div id="recentSearches" class="recent-searches hidden"></div>
        </header>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main id="offersContainer" class="offers-grid">
            <p style="text-align: center; padding: 20px;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </main>
        
        <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
        <div id="emptyFavorites" class="empty-state hidden">
            <div class="empty-icon">‚≠ê</div>
            <h3>–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º –ø–æ–∫–∞ –ø—É—Å—Ç–æ</h3>
            <p>–î–æ–±–∞–≤–ª—è–π—Ç–µ –±—Ä–µ–Ω–¥—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏—Ö</p>
            <button class="go-catalog-btn" onclick="switchTab('catalog')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="modal" class="modal hidden">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="mBrand">Brand</h3>
            <div id="mCode"></div>
            
            <div class="offer-actions">
                <button class="action-btn favorite-btn" onclick="toggleFavoriteFromModal()">
                    <span class="favorite-icon">‚≠ê</span>
                    <span class="favorite-text">–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                </button>
                
                <button class="action-btn export-btn" onclick="exportToPDF()">
                    üì§ –≠–∫—Å–ø–æ—Ä—Ç PDF
                </button>
                
                <button class="action-btn share-btn" onclick="shareOffer()">
                    üîó –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                </button>
            </div>
            
            <div id="additionalSection" class="additional-section" style="display: none;">
                <button class="additional-toggle" onclick="toggleAdditional()">
                    üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
                    <span class="toggle-icon">‚ñº</span>
                </button>
                <div class="additional-content" id="additionalContent"></div>
            </div>
        </div>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content settings-content">
            <span class="close" onclick="toggleSettings()">&times;</span>
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            
            <div class="setting-item">
                <label>üåê –Ø–∑—ã–∫:</label>
                <select id="languageSelect" onchange="changeLanguage(this.value)">
                    <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                    <option value="en">üá¨üáß English</option>
                    <option value="de">üá©üá™ Deutsch</option>
                </select>
            </div>
            
            <div class="setting-item">
                <label>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:</label>
                <label class="switch">
                    <input type="checkbox" id="notificationsToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="setting-item">
                <button class="clear-history-btn" onclick="clearSearchHistory()">
                    üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∏—Å–∫–∞
                </button>
            </div>
        </div>
    </div>

    <script src="script.js?v=6"></script>
</body>
</html>
